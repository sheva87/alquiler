$(function(){var c,a=Number(localStorage.getItem("todo-counter"))+1,b=0,d=$("#show-items li button"),e=$("#show-items"),f=$("#clear-all"),g=$("#todo"),h=[],i=localStorage.getItem("todo-orders");i=i?i.split(","):[];for(b=0,c=i.length;b<c;b++)e.append("<li id='"+i[b]+"'>"+"<span class='editable'>"+localStorage.getItem(i[b])+"</span> <button></button></li>");$(".add-to-list-js").click(function(a){var b,c;a.preventDefault();b=$(this).attr("data-shortlist"),c=$(this).attr("id");$(this).css("background-color","#B9B9B9").css("color","#FFF").css("padding","3px 5px 3px 2px").css("margin-left","3px").css("text-decoration","none").css("-moz-transition","background  .2s ease-in").css("-webkit-transition","background  .2s ease-in").css("-o-transition","background  .2s ease-in").css("transition","background  .2s ease-in"),$(".shortlist li").find("#"+c).length==0&&(console.log("item NOT found..adding new item"),$.publish("/add/",[b]),calculateShortListCount())}),e.delegate("button","click",function(a){var b=$(this);a.preventDefault(),$.publish("/remove/",[b])}),e.sortable({revert:50,stop:function(){$.publish("/regenerate-list/",[])}}),f.click(function(a){a.preventDefault(),$.publish("/clear-all/",[]),console.log("All notes deleted"),calculateShortListCount()}),e.delegate("li","mouseover mouseout",function(a){var b=$(this).find("button");a.type==="mouseover"?b.stop(!0,!0).fadeIn():b.stop(!0,!0).fadeOut()}),$.subscribe("/add/",function(b){var c=b;c&&(localStorage.setItem("todo-"+a,c),localStorage.setItem("todo-counter",a),e.append("<li id='todo-"+a+"'>"+"<span class='editable'>"+localStorage.getItem("todo-"+a)+" </span><button></button></li>"),$.publish("/regenerate-list/",[]),$("#todo-"+a).css("display","none").fadeIn(),g.val(""),a++)}),$.subscribe("/remove/",function(a){var b=a.parent().attr("id");localStorage.removeItem("'"+b+"'"),a.parent().fadeOut(function(){a.parent().remove(),$.publish("/regenerate-list/",[]),calculateShortListCount()})}),$.subscribe("/regenerate-list/",function(){var a=$("#show-items li");h.length=0,a.each(function(){var a=$(this).attr("id");h.push(a)}),localStorage.setItem("todo-orders",h.join(","))}),$.subscribe("/clear-all/",function(){var a=$("#show-items li");h.length=0,localStorage.clear(),a.remove()})})